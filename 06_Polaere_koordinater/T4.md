
## Tutorial 4: Udvidelse til 3D: Cylindriske og Sfæriske Koordinater

**Introduktion:**

Polære koordinater kan også udvides til tre dimensioner. Der findes primært to typer af 3D polære koordinatsystemer: **cylindriske koordinater** og **sfæriske koordinater**. Denne tutorial vil give en introduktion til begge disse systemer og deres relation til 2D polære og 3D kartesiske koordinater.

**Hovedindhold:**

**Cylindriske Koordinater $(r, \theta, z)$:**

Cylindriske koordinater er en direkte udvidelse af 2D polære koordinater til 3D ved at tilføje en tredje koordinat, $z$, som er den samme som z-koordinaten i det kartesiske system. Et punkt i cylindriske koordinater $(r, \theta, z)$ lokaliseres ved først at finde punktet $(r, \theta)$ i xy-planet (som i 2D polære koordinater) og derefter bevæge sig $z$ enheder langs z-aksen.

**Konvertering mellem 3D Kartesiske $(x, y, z)$ og Cylindriske $(r, \theta, z)$ Koordinater:**

Konverteringen er ligetil, da z-koordinaten er den samme i begge systemer. Konverteringen mellem $(x, y)$ og $(r, \theta)$ sker ved hjælp af de 2D metoder fra Tutorial 3:

*   Kartesisk til cylindrisk:
    $$ r = \sqrt{x^2 + y^2} $$
    $$ \theta = \text{atan2}(y, x) $$
    $$ z = z $$

*   Cylindrisk til kartesisk:
    $$ x = r \cos \theta $$
    $$ y = r \sin \theta $$
    $$ z = z $$

Cylindriske koordinater er nyttige i situationer med cylinderformet geometri eller objekter.

**Sfæriske Koordinater $(r, \theta, \phi)$ (Matematisk Konvention):**

Sfæriske koordinater bruger en afstand og to vinkler til at specificere et punkt i 3D. I den matematiske konvention defineres de ofte som $(r, \theta, \phi)$, hvor:

*   **$r$ (radius):** Afstanden fra origo til punktet.
*   **$\theta$ (azimuth):** Vinklen i xy-planet fra den positive x-akse (polaraksen) til projektionen af punktet på xy-planet (samme som $\theta$ i 2D polære og cylindriske koordinater).
*   **$\phi$ (zenith):** Vinklen fra den positive z-akse ned til linjen, der forbinder origo med punktet (område fra $0^\circ$ til $180^\circ$).

**Konvertering mellem 3D Kartesiske $(x, y, z)$ og Sfæriske $(r, \theta, \phi)$ Koordinater (Matematisk Konvention):**

*   Sfærisk til kartesisk:
    $$ x = r \sin \phi \cos \theta $$
    $$ y = r \sin \phi \sin \theta $$
    $$ z = r \cos \phi $$

*   Kartesisk til sfærisk:
    $$ r = \sqrt{x^2 + y^2 + z^2} $$
    $$ \theta = \text{atan2}(y, x) $$
    $$ \phi = \arccos\left(\frac{z}{r}\right) $$

**Sfæriske Koordinater $(r, h, p)$ (Videospil Konvention):**

I videospil bruges ofte en anden konvention for sfæriske koordinater, $(r, h, p)$, hvor:

*   **$r$ (radius):** Afstanden fra origo til punktet (samme som ovenfor).
*   **$h$ (heading):** Den horisontale vinkel, der typisk måles fra den positive z-akse (som "fremad" eller "nord") med positiv rotation med uret set ovenfra.
*   **$p$ (pitch):** Den vertikale vinkel, der måler hvor meget man kigger op eller ned fra et vandret plan. En positiv pitchværdi roterer typisk nedad.

**Konvertering mellem 3D Kartesiske $(x, y, z)$ og Sfæriske $(r, h, p)$ Koordinater (Videospil Konvention):**

*   Sfærisk til kartesisk:
    $$ x = r \cos p \sin h $$
    $$ y = -r \sin p $$
    $$ z = r \cos p \cos h $$

*   Kartesisk til sfærisk:
    $$ r = \sqrt{x^2 + y^2 + z^2} $$
    $$ h = \text{atan2}(x, z) $$
    $$ p = \arcsin\left(-\frac{y}{r}\right) $$

**Aliasing i Sfæriske Koordinater:**

Ligesom i 2D polære koordinater eksisterer der aliasing i sfæriske koordinater. Dette skyldes periodiciteten af vinklerne og det faktum, at forskellige kombinationer af vinkler kan pege i samme retning. Et eksempel er Gimbal lock, som opstår når pitch-vinklen er $\pm 90^\circ$, hvorved heading-vinklen bliver irrelevant.

**Kanonisk Form for Sfæriske Koordinater $(r, h, p)$:**

For at opnå en entydig repræsentation kan sfæriske koordinater i videospilkonventionen også udtrykkes i en kanonisk form med visse begrænsninger for $r$, $h$ og $p$.

**Afsluttende sektion:**

Udvidelsen af polære koordinater til 3D giver os to nyttige systemer: cylindriske og sfæriske koordinater. Cylindriske koordinater er en simpel udvidelse af 2D polære koordinater, mens sfæriske koordinater bruger en afstand og to vinkler. Der findes forskellige konventioner for sfæriske koordinater, som hver har sine egne fordele afhængigt af anvendelsen. Forståelsen af konverteringerne mellem disse systemer og de kartesiske koordinater er afgørende for at arbejde i 3D-rummet.